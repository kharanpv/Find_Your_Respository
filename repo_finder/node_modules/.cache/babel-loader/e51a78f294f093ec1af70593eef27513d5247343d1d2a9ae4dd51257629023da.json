{"ast":null,"code":"\"use strict\";\n\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all) __defProp(target, name, {\n    get: all[name],\n    enumerable: true\n  });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n      get: () => from[key],\n      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n    });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n// If the importer is in node compatibility mode or this is not an ESM\n// file that has been converted to a CommonJS file using a Babel-\n// compatible transform (i.e. \"__esModule\" has not been set), then set\n// \"default\" to the CommonJS \"module.exports\" for node compatibility.\nisNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", {\n  value: mod,\n  enumerable: true\n}) : target, mod));\nvar __toCommonJS = mod => __copyProps(__defProp({}, \"__esModule\", {\n  value: true\n}), mod);\n\n// pkg/dist-src/index.js\nvar dist_src_exports = {};\n__export(dist_src_exports, {\n  OAuthApp: () => OAuthApp,\n  createAWSLambdaAPIGatewayV2Handler: () => createAWSLambdaAPIGatewayV2Handler,\n  createNodeMiddleware: () => createNodeMiddleware,\n  createWebWorkerHandler: () => createWebWorkerHandler,\n  handleRequest: () => handleRequest,\n  sendNodeResponse: () => sendResponse,\n  unknownRouteResponse: () => unknownRouteResponse\n});\nmodule.exports = __toCommonJS(dist_src_exports);\nvar import_auth_oauth_app = require(\"@octokit/auth-oauth-app\");\n\n// pkg/dist-src/version.js\nvar VERSION = \"6.0.0\";\n\n// pkg/dist-src/add-event-handler.js\nfunction addEventHandler(state, eventName, eventHandler) {\n  if (Array.isArray(eventName)) {\n    for (const singleEventName of eventName) {\n      addEventHandler(state, singleEventName, eventHandler);\n    }\n    return;\n  }\n  if (!state.eventHandlers[eventName]) {\n    state.eventHandlers[eventName] = [];\n  }\n  state.eventHandlers[eventName].push(eventHandler);\n}\n\n// pkg/dist-src/oauth-app-octokit.js\nvar import_core = require(\"@octokit/core\");\nvar import_universal_user_agent = require(\"universal-user-agent\");\nvar OAuthAppOctokit = import_core.Octokit.defaults({\n  userAgent: `octokit-oauth-app.js/${VERSION} ${(0, import_universal_user_agent.getUserAgent)()}`\n});\n\n// pkg/dist-src/methods/get-user-octokit.js\nvar import_auth_oauth_user = require(\"@octokit/auth-oauth-user\");\n\n// pkg/dist-src/emit-event.js\nasync function emitEvent(state, context) {\n  const {\n    name,\n    action\n  } = context;\n  if (state.eventHandlers[`${name}.${action}`]) {\n    for (const eventHandler of state.eventHandlers[`${name}.${action}`]) {\n      await eventHandler(context);\n    }\n  }\n  if (state.eventHandlers[name]) {\n    for (const eventHandler of state.eventHandlers[name]) {\n      await eventHandler(context);\n    }\n  }\n}\n\n// pkg/dist-src/methods/get-user-octokit.js\nasync function getUserOctokitWithState(state, options) {\n  return state.octokit.auth({\n    type: \"oauth-user\",\n    ...options,\n    async factory(options2) {\n      const octokit = new state.Octokit({\n        authStrategy: import_auth_oauth_user.createOAuthUserAuth,\n        auth: options2\n      });\n      const authentication = await octokit.auth({\n        type: \"get\"\n      });\n      await emitEvent(state, {\n        name: \"token\",\n        action: \"created\",\n        token: authentication.token,\n        scopes: authentication.scopes,\n        authentication,\n        octokit\n      });\n      return octokit;\n    }\n  });\n}\n\n// pkg/dist-src/methods/get-web-flow-authorization-url.js\nvar OAuthMethods = __toESM(require(\"@octokit/oauth-methods\"));\nfunction getWebFlowAuthorizationUrlWithState(state, options) {\n  const optionsWithDefaults = {\n    clientId: state.clientId,\n    request: state.octokit.request,\n    ...options,\n    allowSignup: state.allowSignup ?? options.allowSignup,\n    redirectUrl: options.redirectUrl ?? state.redirectUrl,\n    scopes: options.scopes ?? state.defaultScopes\n  };\n  return OAuthMethods.getWebFlowAuthorizationUrl({\n    clientType: state.clientType,\n    ...optionsWithDefaults\n  });\n}\n\n// pkg/dist-src/methods/create-token.js\nvar OAuthAppAuth = __toESM(require(\"@octokit/auth-oauth-app\"));\nasync function createTokenWithState(state, options) {\n  const authentication = await state.octokit.auth({\n    type: \"oauth-user\",\n    ...options\n  });\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"created\",\n    token: authentication.token,\n    scopes: authentication.scopes,\n    authentication,\n    octokit: new state.Octokit({\n      authStrategy: OAuthAppAuth.createOAuthUserAuth,\n      auth: {\n        clientType: state.clientType,\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        token: authentication.token,\n        scopes: authentication.scopes,\n        refreshToken: authentication.refreshToken,\n        expiresAt: authentication.expiresAt,\n        refreshTokenExpiresAt: authentication.refreshTokenExpiresAt\n      }\n    })\n  });\n  return {\n    authentication\n  };\n}\n\n// pkg/dist-src/methods/check-token.js\nvar OAuthMethods2 = __toESM(require(\"@octokit/oauth-methods\"));\nasync function checkTokenWithState(state, options) {\n  const result = await OAuthMethods2.checkToken({\n    // @ts-expect-error not worth the extra code to appease TS\n    clientType: state.clientType,\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    ...options\n  });\n  Object.assign(result.authentication, {\n    type: \"token\",\n    tokenType: \"oauth\"\n  });\n  return result;\n}\n\n// pkg/dist-src/methods/reset-token.js\nvar OAuthMethods3 = __toESM(require(\"@octokit/oauth-methods\"));\nvar import_auth_oauth_user2 = require(\"@octokit/auth-oauth-user\");\nasync function resetTokenWithState(state, options) {\n  const optionsWithDefaults = {\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    ...options\n  };\n  if (state.clientType === \"oauth-app\") {\n    const response2 = await OAuthMethods3.resetToken({\n      clientType: \"oauth-app\",\n      ...optionsWithDefaults\n    });\n    const authentication2 = Object.assign(response2.authentication, {\n      type: \"token\",\n      tokenType: \"oauth\"\n    });\n    await emitEvent(state, {\n      name: \"token\",\n      action: \"reset\",\n      token: response2.authentication.token,\n      scopes: response2.authentication.scopes || void 0,\n      authentication: authentication2,\n      octokit: new state.Octokit({\n        authStrategy: import_auth_oauth_user2.createOAuthUserAuth,\n        auth: {\n          clientType: state.clientType,\n          clientId: state.clientId,\n          clientSecret: state.clientSecret,\n          token: response2.authentication.token,\n          scopes: response2.authentication.scopes\n        }\n      })\n    });\n    return {\n      ...response2,\n      authentication: authentication2\n    };\n  }\n  const response = await OAuthMethods3.resetToken({\n    clientType: \"github-app\",\n    ...optionsWithDefaults\n  });\n  const authentication = Object.assign(response.authentication, {\n    type: \"token\",\n    tokenType: \"oauth\"\n  });\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"reset\",\n    token: response.authentication.token,\n    authentication,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_oauth_user2.createOAuthUserAuth,\n      auth: {\n        clientType: state.clientType,\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        token: response.authentication.token\n      }\n    })\n  });\n  return {\n    ...response,\n    authentication\n  };\n}\n\n// pkg/dist-src/methods/refresh-token.js\nvar OAuthMethods4 = __toESM(require(\"@octokit/oauth-methods\"));\nvar import_auth_oauth_user3 = require(\"@octokit/auth-oauth-user\");\nasync function refreshTokenWithState(state, options) {\n  if (state.clientType === \"oauth-app\") {\n    throw new Error(\"[@octokit/oauth-app] app.refreshToken() is not supported for OAuth Apps\");\n  }\n  const response = await OAuthMethods4.refreshToken({\n    clientType: \"github-app\",\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    refreshToken: options.refreshToken\n  });\n  const authentication = Object.assign(response.authentication, {\n    type: \"token\",\n    tokenType: \"oauth\"\n  });\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"refreshed\",\n    token: response.authentication.token,\n    authentication,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_oauth_user3.createOAuthUserAuth,\n      auth: {\n        clientType: state.clientType,\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        token: response.authentication.token\n      }\n    })\n  });\n  return {\n    ...response,\n    authentication\n  };\n}\n\n// pkg/dist-src/methods/scope-token.js\nvar OAuthMethods5 = __toESM(require(\"@octokit/oauth-methods\"));\nvar import_auth_oauth_user4 = require(\"@octokit/auth-oauth-user\");\nasync function scopeTokenWithState(state, options) {\n  if (state.clientType === \"oauth-app\") {\n    throw new Error(\"[@octokit/oauth-app] app.scopeToken() is not supported for OAuth Apps\");\n  }\n  const response = await OAuthMethods5.scopeToken({\n    clientType: \"github-app\",\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    ...options\n  });\n  const authentication = Object.assign(response.authentication, {\n    type: \"token\",\n    tokenType: \"oauth\"\n  });\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"scoped\",\n    token: response.authentication.token,\n    authentication,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_oauth_user4.createOAuthUserAuth,\n      auth: {\n        clientType: state.clientType,\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        token: response.authentication.token\n      }\n    })\n  });\n  return {\n    ...response,\n    authentication\n  };\n}\n\n// pkg/dist-src/methods/delete-token.js\nvar OAuthMethods6 = __toESM(require(\"@octokit/oauth-methods\"));\nvar import_auth_unauthenticated = require(\"@octokit/auth-unauthenticated\");\nasync function deleteTokenWithState(state, options) {\n  const optionsWithDefaults = {\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    ...options\n  };\n  const response = state.clientType === \"oauth-app\" ? await OAuthMethods6.deleteToken({\n    clientType: \"oauth-app\",\n    ...optionsWithDefaults\n  }) :\n  // istanbul ignore next\n  await OAuthMethods6.deleteToken({\n    clientType: \"github-app\",\n    ...optionsWithDefaults\n  });\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"deleted\",\n    token: options.token,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_unauthenticated.createUnauthenticatedAuth,\n      auth: {\n        reason: `Handling \"token.deleted\" event. The access for the token has been revoked.`\n      }\n    })\n  });\n  return response;\n}\n\n// pkg/dist-src/methods/delete-authorization.js\nvar OAuthMethods7 = __toESM(require(\"@octokit/oauth-methods\"));\nvar import_auth_unauthenticated2 = require(\"@octokit/auth-unauthenticated\");\nasync function deleteAuthorizationWithState(state, options) {\n  const optionsWithDefaults = {\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    ...options\n  };\n  const response = state.clientType === \"oauth-app\" ? await OAuthMethods7.deleteAuthorization({\n    clientType: \"oauth-app\",\n    ...optionsWithDefaults\n  }) :\n  // istanbul ignore next\n  await OAuthMethods7.deleteAuthorization({\n    clientType: \"github-app\",\n    ...optionsWithDefaults\n  });\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"deleted\",\n    token: options.token,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_unauthenticated2.createUnauthenticatedAuth,\n      auth: {\n        reason: `Handling \"token.deleted\" event. The access for the token has been revoked.`\n      }\n    })\n  });\n  await emitEvent(state, {\n    name: \"authorization\",\n    action: \"deleted\",\n    token: options.token,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_unauthenticated2.createUnauthenticatedAuth,\n      auth: {\n        reason: `Handling \"authorization.deleted\" event. The access for the app has been revoked.`\n      }\n    })\n  });\n  return response;\n}\n\n// pkg/dist-src/middleware/unknown-route-response.js\nfunction unknownRouteResponse(request) {\n  return {\n    status: 404,\n    headers: {\n      \"content-type\": \"application/json\"\n    },\n    text: JSON.stringify({\n      error: `Unknown route: ${request.method} ${request.url}`\n    })\n  };\n}\n\n// pkg/dist-src/middleware/handle-request.js\nasync function handleRequest(app, {\n  pathPrefix = \"/api/github/oauth\"\n}, request) {\n  if (request.method === \"OPTIONS\") {\n    return {\n      status: 200,\n      headers: {\n        \"access-control-allow-origin\": \"*\",\n        \"access-control-allow-methods\": \"*\",\n        \"access-control-allow-headers\": \"Content-Type, User-Agent, Authorization\"\n      }\n    };\n  }\n  let {\n    pathname\n  } = new URL(request.url, \"http://localhost\");\n  if (!pathname.startsWith(`${pathPrefix}/`)) {\n    return void 0;\n  }\n  pathname = pathname.slice(pathPrefix.length + 1);\n  const route = [request.method, pathname].join(\" \");\n  const routes = {\n    getLogin: `GET login`,\n    getCallback: `GET callback`,\n    createToken: `POST token`,\n    getToken: `GET token`,\n    patchToken: `PATCH token`,\n    patchRefreshToken: `PATCH refresh-token`,\n    scopeToken: `POST token/scoped`,\n    deleteToken: `DELETE token`,\n    deleteGrant: `DELETE grant`\n  };\n  if (!Object.values(routes).includes(route)) {\n    return unknownRouteResponse(request);\n  }\n  let json;\n  try {\n    const text = await request.text();\n    json = text ? JSON.parse(text) : {};\n  } catch (error) {\n    return {\n      status: 400,\n      headers: {\n        \"content-type\": \"application/json\",\n        \"access-control-allow-origin\": \"*\"\n      },\n      text: JSON.stringify({\n        error: \"[@octokit/oauth-app] request error\"\n      })\n    };\n  }\n  const {\n    searchParams\n  } = new URL(request.url, \"http://localhost\");\n  const query = Object.fromEntries(searchParams);\n  const headers = request.headers;\n  try {\n    if (route === routes.getLogin) {\n      const {\n        url\n      } = app.getWebFlowAuthorizationUrl({\n        state: query.state,\n        scopes: query.scopes ? query.scopes.split(\",\") : void 0,\n        allowSignup: query.allowSignup ? query.allowSignup === \"true\" : void 0,\n        redirectUrl: query.redirectUrl\n      });\n      return {\n        status: 302,\n        headers: {\n          location: url\n        }\n      };\n    }\n    if (route === routes.getCallback) {\n      if (query.error) {\n        throw new Error(`[@octokit/oauth-app] ${query.error} ${query.error_description}`);\n      }\n      if (!query.code) {\n        throw new Error('[@octokit/oauth-app] \"code\" parameter is required');\n      }\n      const {\n        authentication: {\n          token: token2\n        }\n      } = await app.createToken({\n        code: query.code\n      });\n      return {\n        status: 200,\n        headers: {\n          \"content-type\": \"text/html\"\n        },\n        text: `<h1>Token created successfully</h1>\n\n<p>Your token is: <strong>${token2}</strong>. Copy it now as it cannot be shown again.</p>`\n      };\n    }\n    if (route === routes.createToken) {\n      const {\n        code,\n        redirectUrl\n      } = json;\n      if (!code) {\n        throw new Error('[@octokit/oauth-app] \"code\" parameter is required');\n      }\n      const result = await app.createToken({\n        code,\n        redirectUrl\n      });\n      delete result.authentication.clientSecret;\n      return {\n        status: 201,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"access-control-allow-origin\": \"*\"\n        },\n        text: JSON.stringify(result)\n      };\n    }\n    if (route === routes.getToken) {\n      const token2 = headers.authorization?.substr(\"token \".length);\n      if (!token2) {\n        throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n      }\n      const result = await app.checkToken({\n        token: token2\n      });\n      delete result.authentication.clientSecret;\n      return {\n        status: 200,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"access-control-allow-origin\": \"*\"\n        },\n        text: JSON.stringify(result)\n      };\n    }\n    if (route === routes.patchToken) {\n      const token2 = headers.authorization?.substr(\"token \".length);\n      if (!token2) {\n        throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n      }\n      const result = await app.resetToken({\n        token: token2\n      });\n      delete result.authentication.clientSecret;\n      return {\n        status: 200,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"access-control-allow-origin\": \"*\"\n        },\n        text: JSON.stringify(result)\n      };\n    }\n    if (route === routes.patchRefreshToken) {\n      const token2 = headers.authorization?.substr(\"token \".length);\n      if (!token2) {\n        throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n      }\n      const {\n        refreshToken: refreshToken2\n      } = json;\n      if (!refreshToken2) {\n        throw new Error(\"[@octokit/oauth-app] refreshToken must be sent in request body\");\n      }\n      const result = await app.refreshToken({\n        refreshToken: refreshToken2\n      });\n      delete result.authentication.clientSecret;\n      return {\n        status: 200,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"access-control-allow-origin\": \"*\"\n        },\n        text: JSON.stringify(result)\n      };\n    }\n    if (route === routes.scopeToken) {\n      const token2 = headers.authorization?.substr(\"token \".length);\n      if (!token2) {\n        throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n      }\n      const result = await app.scopeToken({\n        token: token2,\n        ...json\n      });\n      delete result.authentication.clientSecret;\n      return {\n        status: 200,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"access-control-allow-origin\": \"*\"\n        },\n        text: JSON.stringify(result)\n      };\n    }\n    if (route === routes.deleteToken) {\n      const token2 = headers.authorization?.substr(\"token \".length);\n      if (!token2) {\n        throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n      }\n      await app.deleteToken({\n        token: token2\n      });\n      return {\n        status: 204,\n        headers: {\n          \"access-control-allow-origin\": \"*\"\n        }\n      };\n    }\n    const token = headers.authorization?.substr(\"token \".length);\n    if (!token) {\n      throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n    }\n    await app.deleteAuthorization({\n      token\n    });\n    return {\n      status: 204,\n      headers: {\n        \"access-control-allow-origin\": \"*\"\n      }\n    };\n  } catch (error) {\n    return {\n      status: 400,\n      headers: {\n        \"content-type\": \"application/json\",\n        \"access-control-allow-origin\": \"*\"\n      },\n      text: JSON.stringify({\n        error: error.message\n      })\n    };\n  }\n}\n\n// pkg/dist-src/middleware/node/parse-request.js\nfunction parseRequest(request) {\n  const {\n    method,\n    url,\n    headers\n  } = request;\n  async function text() {\n    const text2 = await new Promise((resolve, reject) => {\n      let bodyChunks = [];\n      request.on(\"error\", reject).on(\"data\", chunk => bodyChunks.push(chunk)).on(\"end\", () => resolve(Buffer.concat(bodyChunks).toString()));\n    });\n    return text2;\n  }\n  return {\n    method,\n    url,\n    headers,\n    text\n  };\n}\n\n// pkg/dist-src/middleware/node/send-response.js\nfunction sendResponse(octokitResponse, response) {\n  response.writeHead(octokitResponse.status, octokitResponse.headers);\n  response.end(octokitResponse.text);\n}\n\n// pkg/dist-src/middleware/node/index.js\nfunction createNodeMiddleware(app, options = {}) {\n  return async function (request, response, next) {\n    const octokitRequest = await parseRequest(request);\n    const octokitResponse = await handleRequest(app, options, octokitRequest);\n    if (octokitResponse) {\n      sendResponse(octokitResponse, response);\n      return true;\n    } else {\n      next?.();\n      return false;\n    }\n  };\n}\n\n// pkg/dist-src/middleware/web-worker/parse-request.js\nfunction parseRequest2(request) {\n  const headers = Object.fromEntries(request.headers.entries());\n  return {\n    method: request.method,\n    url: request.url,\n    headers,\n    text: () => request.text()\n  };\n}\n\n// pkg/dist-src/middleware/web-worker/send-response.js\nfunction sendResponse2(octokitResponse) {\n  return new Response(octokitResponse.text, {\n    status: octokitResponse.status,\n    headers: octokitResponse.headers\n  });\n}\n\n// pkg/dist-src/middleware/web-worker/index.js\nfunction createWebWorkerHandler(app, options = {}) {\n  return async function (request) {\n    const octokitRequest = await parseRequest2(request);\n    const octokitResponse = await handleRequest(app, options, octokitRequest);\n    return octokitResponse ? sendResponse2(octokitResponse) : void 0;\n  };\n}\n\n// pkg/dist-src/middleware/aws-lambda/api-gateway-v2-parse-request.js\nfunction parseRequest3(request) {\n  const {\n    method\n  } = request.requestContext.http;\n  let url = request.rawPath;\n  const {\n    stage\n  } = request.requestContext;\n  if (url.startsWith(\"/\" + stage)) url = url.substring(stage.length + 1);\n  if (request.rawQueryString) url += \"?\" + request.rawQueryString;\n  const headers = request.headers;\n  const text = async () => request.body || \"\";\n  return {\n    method,\n    url,\n    headers,\n    text\n  };\n}\n\n// pkg/dist-src/middleware/aws-lambda/api-gateway-v2-send-response.js\nfunction sendResponse3(octokitResponse) {\n  return {\n    statusCode: octokitResponse.status,\n    headers: octokitResponse.headers,\n    body: octokitResponse.text\n  };\n}\n\n// pkg/dist-src/middleware/aws-lambda/api-gateway-v2.js\nfunction createAWSLambdaAPIGatewayV2Handler(app, options = {}) {\n  return async function (event) {\n    const request = parseRequest3(event);\n    const response = await handleRequest(app, options, request);\n    return response ? sendResponse3(response) : void 0;\n  };\n}\n\n// pkg/dist-src/index.js\nvar OAuthApp = class {\n  static {\n    this.VERSION = VERSION;\n  }\n  static defaults(defaults) {\n    const OAuthAppWithDefaults = class extends this {\n      constructor(...args) {\n        super({\n          ...defaults,\n          ...args[0]\n        });\n      }\n    };\n    return OAuthAppWithDefaults;\n  }\n  constructor(options) {\n    const Octokit2 = options.Octokit || OAuthAppOctokit;\n    this.type = options.clientType || \"oauth-app\";\n    const octokit = new Octokit2({\n      authStrategy: import_auth_oauth_app.createOAuthAppAuth,\n      auth: {\n        clientType: this.type,\n        clientId: options.clientId,\n        clientSecret: options.clientSecret\n      }\n    });\n    const state = {\n      clientType: this.type,\n      clientId: options.clientId,\n      clientSecret: options.clientSecret,\n      // @ts-expect-error defaultScopes not permitted for GitHub Apps\n      defaultScopes: options.defaultScopes || [],\n      allowSignup: options.allowSignup,\n      baseUrl: options.baseUrl,\n      redirectUrl: options.redirectUrl,\n      log: options.log,\n      Octokit: Octokit2,\n      octokit,\n      eventHandlers: {}\n    };\n    this.on = addEventHandler.bind(null, state);\n    this.octokit = octokit;\n    this.getUserOctokit = getUserOctokitWithState.bind(null, state);\n    this.getWebFlowAuthorizationUrl = getWebFlowAuthorizationUrlWithState.bind(null, state);\n    this.createToken = createTokenWithState.bind(null, state);\n    this.checkToken = checkTokenWithState.bind(null, state);\n    this.resetToken = resetTokenWithState.bind(null, state);\n    this.refreshToken = refreshTokenWithState.bind(null, state);\n    this.scopeToken = scopeTokenWithState.bind(null, state);\n    this.deleteToken = deleteTokenWithState.bind(null, state);\n    this.deleteAuthorization = deleteAuthorizationWithState.bind(null, state);\n  }\n};\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  OAuthApp,\n  createAWSLambdaAPIGatewayV2Handler,\n  createNodeMiddleware,\n  createWebWorkerHandler,\n  handleRequest,\n  sendNodeResponse,\n  unknownRouteResponse\n});","map":{"version":3,"names":["__create","Object","create","__defProp","defineProperty","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropNames","getOwnPropertyNames","__getProtoOf","getPrototypeOf","__hasOwnProp","prototype","hasOwnProperty","__export","target","all","name","get","enumerable","__copyProps","to","from","except","desc","key","call","__toESM","mod","isNodeMode","__esModule","value","__toCommonJS","dist_src_exports","OAuthApp","createAWSLambdaAPIGatewayV2Handler","createNodeMiddleware","createWebWorkerHandler","handleRequest","sendNodeResponse","sendResponse","unknownRouteResponse","module","exports","import_auth_oauth_app","require","VERSION","addEventHandler","state","eventName","eventHandler","Array","isArray","singleEventName","eventHandlers","push","import_core","import_universal_user_agent","OAuthAppOctokit","Octokit","defaults","userAgent","getUserAgent","import_auth_oauth_user","emitEvent","context","action","getUserOctokitWithState","options","octokit","auth","type","factory","options2","authStrategy","createOAuthUserAuth","authentication","token","scopes","OAuthMethods","getWebFlowAuthorizationUrlWithState","optionsWithDefaults","clientId","request","allowSignup","redirectUrl","defaultScopes","getWebFlowAuthorizationUrl","clientType","OAuthAppAuth","createTokenWithState","clientSecret","refreshToken","expiresAt","refreshTokenExpiresAt","OAuthMethods2","checkTokenWithState","result","checkToken","assign","tokenType","OAuthMethods3","import_auth_oauth_user2","resetTokenWithState","response2","resetToken","authentication2","response","OAuthMethods4","import_auth_oauth_user3","refreshTokenWithState","Error","OAuthMethods5","import_auth_oauth_user4","scopeTokenWithState","scopeToken","OAuthMethods6","import_auth_unauthenticated","deleteTokenWithState","deleteToken","createUnauthenticatedAuth","reason","OAuthMethods7","import_auth_unauthenticated2","deleteAuthorizationWithState","deleteAuthorization","status","headers","text","JSON","stringify","error","method","url","app","pathPrefix","pathname","URL","startsWith","slice","length","route","join","routes","getLogin","getCallback","createToken","getToken","patchToken","patchRefreshToken","deleteGrant","values","includes","json","parse","searchParams","query","fromEntries","split","location","error_description","code","token2","authorization","substr","refreshToken2","message","parseRequest","text2","Promise","resolve","reject","bodyChunks","on","chunk","Buffer","concat","toString","octokitResponse","writeHead","end","next","octokitRequest","parseRequest2","entries","sendResponse2","Response","parseRequest3","requestContext","http","rawPath","stage","substring","rawQueryString","body","sendResponse3","statusCode","event","OAuthAppWithDefaults","constructor","args","Octokit2","createOAuthAppAuth","baseUrl","log","bind","getUserOctokit"],"sources":["C:/Users/Prateek/Desktop/College_Stuff/Fall_2023_Co-op_Semester/MakeUC/Find_your_repository/node_modules/@octokit/oauth-app/dist-node/index.js"],"sourcesContent":["\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// pkg/dist-src/index.js\nvar dist_src_exports = {};\n__export(dist_src_exports, {\n  OAuthApp: () => OAuthApp,\n  createAWSLambdaAPIGatewayV2Handler: () => createAWSLambdaAPIGatewayV2Handler,\n  createNodeMiddleware: () => createNodeMiddleware,\n  createWebWorkerHandler: () => createWebWorkerHandler,\n  handleRequest: () => handleRequest,\n  sendNodeResponse: () => sendResponse,\n  unknownRouteResponse: () => unknownRouteResponse\n});\nmodule.exports = __toCommonJS(dist_src_exports);\nvar import_auth_oauth_app = require(\"@octokit/auth-oauth-app\");\n\n// pkg/dist-src/version.js\nvar VERSION = \"6.0.0\";\n\n// pkg/dist-src/add-event-handler.js\nfunction addEventHandler(state, eventName, eventHandler) {\n  if (Array.isArray(eventName)) {\n    for (const singleEventName of eventName) {\n      addEventHandler(state, singleEventName, eventHandler);\n    }\n    return;\n  }\n  if (!state.eventHandlers[eventName]) {\n    state.eventHandlers[eventName] = [];\n  }\n  state.eventHandlers[eventName].push(eventHandler);\n}\n\n// pkg/dist-src/oauth-app-octokit.js\nvar import_core = require(\"@octokit/core\");\nvar import_universal_user_agent = require(\"universal-user-agent\");\nvar OAuthAppOctokit = import_core.Octokit.defaults({\n  userAgent: `octokit-oauth-app.js/${VERSION} ${(0, import_universal_user_agent.getUserAgent)()}`\n});\n\n// pkg/dist-src/methods/get-user-octokit.js\nvar import_auth_oauth_user = require(\"@octokit/auth-oauth-user\");\n\n// pkg/dist-src/emit-event.js\nasync function emitEvent(state, context) {\n  const { name, action } = context;\n  if (state.eventHandlers[`${name}.${action}`]) {\n    for (const eventHandler of state.eventHandlers[`${name}.${action}`]) {\n      await eventHandler(context);\n    }\n  }\n  if (state.eventHandlers[name]) {\n    for (const eventHandler of state.eventHandlers[name]) {\n      await eventHandler(context);\n    }\n  }\n}\n\n// pkg/dist-src/methods/get-user-octokit.js\nasync function getUserOctokitWithState(state, options) {\n  return state.octokit.auth({\n    type: \"oauth-user\",\n    ...options,\n    async factory(options2) {\n      const octokit = new state.Octokit({\n        authStrategy: import_auth_oauth_user.createOAuthUserAuth,\n        auth: options2\n      });\n      const authentication = await octokit.auth({\n        type: \"get\"\n      });\n      await emitEvent(state, {\n        name: \"token\",\n        action: \"created\",\n        token: authentication.token,\n        scopes: authentication.scopes,\n        authentication,\n        octokit\n      });\n      return octokit;\n    }\n  });\n}\n\n// pkg/dist-src/methods/get-web-flow-authorization-url.js\nvar OAuthMethods = __toESM(require(\"@octokit/oauth-methods\"));\nfunction getWebFlowAuthorizationUrlWithState(state, options) {\n  const optionsWithDefaults = {\n    clientId: state.clientId,\n    request: state.octokit.request,\n    ...options,\n    allowSignup: state.allowSignup ?? options.allowSignup,\n    redirectUrl: options.redirectUrl ?? state.redirectUrl,\n    scopes: options.scopes ?? state.defaultScopes\n  };\n  return OAuthMethods.getWebFlowAuthorizationUrl({\n    clientType: state.clientType,\n    ...optionsWithDefaults\n  });\n}\n\n// pkg/dist-src/methods/create-token.js\nvar OAuthAppAuth = __toESM(require(\"@octokit/auth-oauth-app\"));\nasync function createTokenWithState(state, options) {\n  const authentication = await state.octokit.auth({\n    type: \"oauth-user\",\n    ...options\n  });\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"created\",\n    token: authentication.token,\n    scopes: authentication.scopes,\n    authentication,\n    octokit: new state.Octokit({\n      authStrategy: OAuthAppAuth.createOAuthUserAuth,\n      auth: {\n        clientType: state.clientType,\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        token: authentication.token,\n        scopes: authentication.scopes,\n        refreshToken: authentication.refreshToken,\n        expiresAt: authentication.expiresAt,\n        refreshTokenExpiresAt: authentication.refreshTokenExpiresAt\n      }\n    })\n  });\n  return { authentication };\n}\n\n// pkg/dist-src/methods/check-token.js\nvar OAuthMethods2 = __toESM(require(\"@octokit/oauth-methods\"));\nasync function checkTokenWithState(state, options) {\n  const result = await OAuthMethods2.checkToken({\n    // @ts-expect-error not worth the extra code to appease TS\n    clientType: state.clientType,\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    ...options\n  });\n  Object.assign(result.authentication, { type: \"token\", tokenType: \"oauth\" });\n  return result;\n}\n\n// pkg/dist-src/methods/reset-token.js\nvar OAuthMethods3 = __toESM(require(\"@octokit/oauth-methods\"));\nvar import_auth_oauth_user2 = require(\"@octokit/auth-oauth-user\");\nasync function resetTokenWithState(state, options) {\n  const optionsWithDefaults = {\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    ...options\n  };\n  if (state.clientType === \"oauth-app\") {\n    const response2 = await OAuthMethods3.resetToken({\n      clientType: \"oauth-app\",\n      ...optionsWithDefaults\n    });\n    const authentication2 = Object.assign(response2.authentication, {\n      type: \"token\",\n      tokenType: \"oauth\"\n    });\n    await emitEvent(state, {\n      name: \"token\",\n      action: \"reset\",\n      token: response2.authentication.token,\n      scopes: response2.authentication.scopes || void 0,\n      authentication: authentication2,\n      octokit: new state.Octokit({\n        authStrategy: import_auth_oauth_user2.createOAuthUserAuth,\n        auth: {\n          clientType: state.clientType,\n          clientId: state.clientId,\n          clientSecret: state.clientSecret,\n          token: response2.authentication.token,\n          scopes: response2.authentication.scopes\n        }\n      })\n    });\n    return { ...response2, authentication: authentication2 };\n  }\n  const response = await OAuthMethods3.resetToken({\n    clientType: \"github-app\",\n    ...optionsWithDefaults\n  });\n  const authentication = Object.assign(response.authentication, {\n    type: \"token\",\n    tokenType: \"oauth\"\n  });\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"reset\",\n    token: response.authentication.token,\n    authentication,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_oauth_user2.createOAuthUserAuth,\n      auth: {\n        clientType: state.clientType,\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        token: response.authentication.token\n      }\n    })\n  });\n  return { ...response, authentication };\n}\n\n// pkg/dist-src/methods/refresh-token.js\nvar OAuthMethods4 = __toESM(require(\"@octokit/oauth-methods\"));\nvar import_auth_oauth_user3 = require(\"@octokit/auth-oauth-user\");\nasync function refreshTokenWithState(state, options) {\n  if (state.clientType === \"oauth-app\") {\n    throw new Error(\n      \"[@octokit/oauth-app] app.refreshToken() is not supported for OAuth Apps\"\n    );\n  }\n  const response = await OAuthMethods4.refreshToken({\n    clientType: \"github-app\",\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    refreshToken: options.refreshToken\n  });\n  const authentication = Object.assign(response.authentication, {\n    type: \"token\",\n    tokenType: \"oauth\"\n  });\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"refreshed\",\n    token: response.authentication.token,\n    authentication,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_oauth_user3.createOAuthUserAuth,\n      auth: {\n        clientType: state.clientType,\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        token: response.authentication.token\n      }\n    })\n  });\n  return { ...response, authentication };\n}\n\n// pkg/dist-src/methods/scope-token.js\nvar OAuthMethods5 = __toESM(require(\"@octokit/oauth-methods\"));\nvar import_auth_oauth_user4 = require(\"@octokit/auth-oauth-user\");\nasync function scopeTokenWithState(state, options) {\n  if (state.clientType === \"oauth-app\") {\n    throw new Error(\n      \"[@octokit/oauth-app] app.scopeToken() is not supported for OAuth Apps\"\n    );\n  }\n  const response = await OAuthMethods5.scopeToken({\n    clientType: \"github-app\",\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    ...options\n  });\n  const authentication = Object.assign(response.authentication, {\n    type: \"token\",\n    tokenType: \"oauth\"\n  });\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"scoped\",\n    token: response.authentication.token,\n    authentication,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_oauth_user4.createOAuthUserAuth,\n      auth: {\n        clientType: state.clientType,\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        token: response.authentication.token\n      }\n    })\n  });\n  return { ...response, authentication };\n}\n\n// pkg/dist-src/methods/delete-token.js\nvar OAuthMethods6 = __toESM(require(\"@octokit/oauth-methods\"));\nvar import_auth_unauthenticated = require(\"@octokit/auth-unauthenticated\");\nasync function deleteTokenWithState(state, options) {\n  const optionsWithDefaults = {\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    ...options\n  };\n  const response = state.clientType === \"oauth-app\" ? await OAuthMethods6.deleteToken({\n    clientType: \"oauth-app\",\n    ...optionsWithDefaults\n  }) : (\n    // istanbul ignore next\n    await OAuthMethods6.deleteToken({\n      clientType: \"github-app\",\n      ...optionsWithDefaults\n    })\n  );\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"deleted\",\n    token: options.token,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_unauthenticated.createUnauthenticatedAuth,\n      auth: {\n        reason: `Handling \"token.deleted\" event. The access for the token has been revoked.`\n      }\n    })\n  });\n  return response;\n}\n\n// pkg/dist-src/methods/delete-authorization.js\nvar OAuthMethods7 = __toESM(require(\"@octokit/oauth-methods\"));\nvar import_auth_unauthenticated2 = require(\"@octokit/auth-unauthenticated\");\nasync function deleteAuthorizationWithState(state, options) {\n  const optionsWithDefaults = {\n    clientId: state.clientId,\n    clientSecret: state.clientSecret,\n    request: state.octokit.request,\n    ...options\n  };\n  const response = state.clientType === \"oauth-app\" ? await OAuthMethods7.deleteAuthorization({\n    clientType: \"oauth-app\",\n    ...optionsWithDefaults\n  }) : (\n    // istanbul ignore next\n    await OAuthMethods7.deleteAuthorization({\n      clientType: \"github-app\",\n      ...optionsWithDefaults\n    })\n  );\n  await emitEvent(state, {\n    name: \"token\",\n    action: \"deleted\",\n    token: options.token,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_unauthenticated2.createUnauthenticatedAuth,\n      auth: {\n        reason: `Handling \"token.deleted\" event. The access for the token has been revoked.`\n      }\n    })\n  });\n  await emitEvent(state, {\n    name: \"authorization\",\n    action: \"deleted\",\n    token: options.token,\n    octokit: new state.Octokit({\n      authStrategy: import_auth_unauthenticated2.createUnauthenticatedAuth,\n      auth: {\n        reason: `Handling \"authorization.deleted\" event. The access for the app has been revoked.`\n      }\n    })\n  });\n  return response;\n}\n\n// pkg/dist-src/middleware/unknown-route-response.js\nfunction unknownRouteResponse(request) {\n  return {\n    status: 404,\n    headers: { \"content-type\": \"application/json\" },\n    text: JSON.stringify({\n      error: `Unknown route: ${request.method} ${request.url}`\n    })\n  };\n}\n\n// pkg/dist-src/middleware/handle-request.js\nasync function handleRequest(app, { pathPrefix = \"/api/github/oauth\" }, request) {\n  if (request.method === \"OPTIONS\") {\n    return {\n      status: 200,\n      headers: {\n        \"access-control-allow-origin\": \"*\",\n        \"access-control-allow-methods\": \"*\",\n        \"access-control-allow-headers\": \"Content-Type, User-Agent, Authorization\"\n      }\n    };\n  }\n  let { pathname } = new URL(request.url, \"http://localhost\");\n  if (!pathname.startsWith(`${pathPrefix}/`)) {\n    return void 0;\n  }\n  pathname = pathname.slice(pathPrefix.length + 1);\n  const route = [request.method, pathname].join(\" \");\n  const routes = {\n    getLogin: `GET login`,\n    getCallback: `GET callback`,\n    createToken: `POST token`,\n    getToken: `GET token`,\n    patchToken: `PATCH token`,\n    patchRefreshToken: `PATCH refresh-token`,\n    scopeToken: `POST token/scoped`,\n    deleteToken: `DELETE token`,\n    deleteGrant: `DELETE grant`\n  };\n  if (!Object.values(routes).includes(route)) {\n    return unknownRouteResponse(request);\n  }\n  let json;\n  try {\n    const text = await request.text();\n    json = text ? JSON.parse(text) : {};\n  } catch (error) {\n    return {\n      status: 400,\n      headers: {\n        \"content-type\": \"application/json\",\n        \"access-control-allow-origin\": \"*\"\n      },\n      text: JSON.stringify({\n        error: \"[@octokit/oauth-app] request error\"\n      })\n    };\n  }\n  const { searchParams } = new URL(request.url, \"http://localhost\");\n  const query = Object.fromEntries(searchParams);\n  const headers = request.headers;\n  try {\n    if (route === routes.getLogin) {\n      const { url } = app.getWebFlowAuthorizationUrl({\n        state: query.state,\n        scopes: query.scopes ? query.scopes.split(\",\") : void 0,\n        allowSignup: query.allowSignup ? query.allowSignup === \"true\" : void 0,\n        redirectUrl: query.redirectUrl\n      });\n      return { status: 302, headers: { location: url } };\n    }\n    if (route === routes.getCallback) {\n      if (query.error) {\n        throw new Error(\n          `[@octokit/oauth-app] ${query.error} ${query.error_description}`\n        );\n      }\n      if (!query.code) {\n        throw new Error('[@octokit/oauth-app] \"code\" parameter is required');\n      }\n      const {\n        authentication: { token: token2 }\n      } = await app.createToken({\n        code: query.code\n      });\n      return {\n        status: 200,\n        headers: {\n          \"content-type\": \"text/html\"\n        },\n        text: `<h1>Token created successfully</h1>\n\n<p>Your token is: <strong>${token2}</strong>. Copy it now as it cannot be shown again.</p>`\n      };\n    }\n    if (route === routes.createToken) {\n      const { code, redirectUrl } = json;\n      if (!code) {\n        throw new Error('[@octokit/oauth-app] \"code\" parameter is required');\n      }\n      const result = await app.createToken({\n        code,\n        redirectUrl\n      });\n      delete result.authentication.clientSecret;\n      return {\n        status: 201,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"access-control-allow-origin\": \"*\"\n        },\n        text: JSON.stringify(result)\n      };\n    }\n    if (route === routes.getToken) {\n      const token2 = headers.authorization?.substr(\"token \".length);\n      if (!token2) {\n        throw new Error(\n          '[@octokit/oauth-app] \"Authorization\" header is required'\n        );\n      }\n      const result = await app.checkToken({\n        token: token2\n      });\n      delete result.authentication.clientSecret;\n      return {\n        status: 200,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"access-control-allow-origin\": \"*\"\n        },\n        text: JSON.stringify(result)\n      };\n    }\n    if (route === routes.patchToken) {\n      const token2 = headers.authorization?.substr(\"token \".length);\n      if (!token2) {\n        throw new Error(\n          '[@octokit/oauth-app] \"Authorization\" header is required'\n        );\n      }\n      const result = await app.resetToken({ token: token2 });\n      delete result.authentication.clientSecret;\n      return {\n        status: 200,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"access-control-allow-origin\": \"*\"\n        },\n        text: JSON.stringify(result)\n      };\n    }\n    if (route === routes.patchRefreshToken) {\n      const token2 = headers.authorization?.substr(\"token \".length);\n      if (!token2) {\n        throw new Error(\n          '[@octokit/oauth-app] \"Authorization\" header is required'\n        );\n      }\n      const { refreshToken: refreshToken2 } = json;\n      if (!refreshToken2) {\n        throw new Error(\n          \"[@octokit/oauth-app] refreshToken must be sent in request body\"\n        );\n      }\n      const result = await app.refreshToken({ refreshToken: refreshToken2 });\n      delete result.authentication.clientSecret;\n      return {\n        status: 200,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"access-control-allow-origin\": \"*\"\n        },\n        text: JSON.stringify(result)\n      };\n    }\n    if (route === routes.scopeToken) {\n      const token2 = headers.authorization?.substr(\"token \".length);\n      if (!token2) {\n        throw new Error(\n          '[@octokit/oauth-app] \"Authorization\" header is required'\n        );\n      }\n      const result = await app.scopeToken({\n        token: token2,\n        ...json\n      });\n      delete result.authentication.clientSecret;\n      return {\n        status: 200,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"access-control-allow-origin\": \"*\"\n        },\n        text: JSON.stringify(result)\n      };\n    }\n    if (route === routes.deleteToken) {\n      const token2 = headers.authorization?.substr(\"token \".length);\n      if (!token2) {\n        throw new Error(\n          '[@octokit/oauth-app] \"Authorization\" header is required'\n        );\n      }\n      await app.deleteToken({\n        token: token2\n      });\n      return {\n        status: 204,\n        headers: { \"access-control-allow-origin\": \"*\" }\n      };\n    }\n    const token = headers.authorization?.substr(\"token \".length);\n    if (!token) {\n      throw new Error(\n        '[@octokit/oauth-app] \"Authorization\" header is required'\n      );\n    }\n    await app.deleteAuthorization({\n      token\n    });\n    return {\n      status: 204,\n      headers: { \"access-control-allow-origin\": \"*\" }\n    };\n  } catch (error) {\n    return {\n      status: 400,\n      headers: {\n        \"content-type\": \"application/json\",\n        \"access-control-allow-origin\": \"*\"\n      },\n      text: JSON.stringify({ error: error.message })\n    };\n  }\n}\n\n// pkg/dist-src/middleware/node/parse-request.js\nfunction parseRequest(request) {\n  const { method, url, headers } = request;\n  async function text() {\n    const text2 = await new Promise((resolve, reject) => {\n      let bodyChunks = [];\n      request.on(\"error\", reject).on(\"data\", (chunk) => bodyChunks.push(chunk)).on(\"end\", () => resolve(Buffer.concat(bodyChunks).toString()));\n    });\n    return text2;\n  }\n  return { method, url, headers, text };\n}\n\n// pkg/dist-src/middleware/node/send-response.js\nfunction sendResponse(octokitResponse, response) {\n  response.writeHead(octokitResponse.status, octokitResponse.headers);\n  response.end(octokitResponse.text);\n}\n\n// pkg/dist-src/middleware/node/index.js\nfunction createNodeMiddleware(app, options = {}) {\n  return async function(request, response, next) {\n    const octokitRequest = await parseRequest(request);\n    const octokitResponse = await handleRequest(app, options, octokitRequest);\n    if (octokitResponse) {\n      sendResponse(octokitResponse, response);\n      return true;\n    } else {\n      next?.();\n      return false;\n    }\n  };\n}\n\n// pkg/dist-src/middleware/web-worker/parse-request.js\nfunction parseRequest2(request) {\n  const headers = Object.fromEntries(request.headers.entries());\n  return {\n    method: request.method,\n    url: request.url,\n    headers,\n    text: () => request.text()\n  };\n}\n\n// pkg/dist-src/middleware/web-worker/send-response.js\nfunction sendResponse2(octokitResponse) {\n  return new Response(octokitResponse.text, {\n    status: octokitResponse.status,\n    headers: octokitResponse.headers\n  });\n}\n\n// pkg/dist-src/middleware/web-worker/index.js\nfunction createWebWorkerHandler(app, options = {}) {\n  return async function(request) {\n    const octokitRequest = await parseRequest2(request);\n    const octokitResponse = await handleRequest(app, options, octokitRequest);\n    return octokitResponse ? sendResponse2(octokitResponse) : void 0;\n  };\n}\n\n// pkg/dist-src/middleware/aws-lambda/api-gateway-v2-parse-request.js\nfunction parseRequest3(request) {\n  const { method } = request.requestContext.http;\n  let url = request.rawPath;\n  const { stage } = request.requestContext;\n  if (url.startsWith(\"/\" + stage))\n    url = url.substring(stage.length + 1);\n  if (request.rawQueryString)\n    url += \"?\" + request.rawQueryString;\n  const headers = request.headers;\n  const text = async () => request.body || \"\";\n  return { method, url, headers, text };\n}\n\n// pkg/dist-src/middleware/aws-lambda/api-gateway-v2-send-response.js\nfunction sendResponse3(octokitResponse) {\n  return {\n    statusCode: octokitResponse.status,\n    headers: octokitResponse.headers,\n    body: octokitResponse.text\n  };\n}\n\n// pkg/dist-src/middleware/aws-lambda/api-gateway-v2.js\nfunction createAWSLambdaAPIGatewayV2Handler(app, options = {}) {\n  return async function(event) {\n    const request = parseRequest3(event);\n    const response = await handleRequest(app, options, request);\n    return response ? sendResponse3(response) : void 0;\n  };\n}\n\n// pkg/dist-src/index.js\nvar OAuthApp = class {\n  static {\n    this.VERSION = VERSION;\n  }\n  static defaults(defaults) {\n    const OAuthAppWithDefaults = class extends this {\n      constructor(...args) {\n        super({\n          ...defaults,\n          ...args[0]\n        });\n      }\n    };\n    return OAuthAppWithDefaults;\n  }\n  constructor(options) {\n    const Octokit2 = options.Octokit || OAuthAppOctokit;\n    this.type = options.clientType || \"oauth-app\";\n    const octokit = new Octokit2({\n      authStrategy: import_auth_oauth_app.createOAuthAppAuth,\n      auth: {\n        clientType: this.type,\n        clientId: options.clientId,\n        clientSecret: options.clientSecret\n      }\n    });\n    const state = {\n      clientType: this.type,\n      clientId: options.clientId,\n      clientSecret: options.clientSecret,\n      // @ts-expect-error defaultScopes not permitted for GitHub Apps\n      defaultScopes: options.defaultScopes || [],\n      allowSignup: options.allowSignup,\n      baseUrl: options.baseUrl,\n      redirectUrl: options.redirectUrl,\n      log: options.log,\n      Octokit: Octokit2,\n      octokit,\n      eventHandlers: {}\n    };\n    this.on = addEventHandler.bind(null, state);\n    this.octokit = octokit;\n    this.getUserOctokit = getUserOctokitWithState.bind(null, state);\n    this.getWebFlowAuthorizationUrl = getWebFlowAuthorizationUrlWithState.bind(\n      null,\n      state\n    );\n    this.createToken = createTokenWithState.bind(\n      null,\n      state\n    );\n    this.checkToken = checkTokenWithState.bind(\n      null,\n      state\n    );\n    this.resetToken = resetTokenWithState.bind(\n      null,\n      state\n    );\n    this.refreshToken = refreshTokenWithState.bind(\n      null,\n      state\n    );\n    this.scopeToken = scopeTokenWithState.bind(\n      null,\n      state\n    );\n    this.deleteToken = deleteTokenWithState.bind(null, state);\n    this.deleteAuthorization = deleteAuthorizationWithState.bind(null, state);\n  }\n};\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  OAuthApp,\n  createAWSLambdaAPIGatewayV2Handler,\n  createNodeMiddleware,\n  createWebWorkerHandler,\n  handleRequest,\n  sendNodeResponse,\n  unknownRouteResponse\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}